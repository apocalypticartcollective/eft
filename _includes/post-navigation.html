<div class="post-navigation-wrapper">
  {%- comment -%}
  We build an ordered list of posts by date ascending so:
  - prev_post = older post (earlier date)
  - next_post = newer post (later date)
  This avoids confusion with Jekyll's default ordering.
  {%- endcomment -%}

  {% assign ordered_posts = site.posts | sort: "date" %}
  {% for p in ordered_posts %}
    {% if p.url == page.url %}
      {% assign i = forloop.index0 %}
      {% assign prev_index = i | minus: 1 %}
      {% assign next_index = i | plus: 1 %}
      {% if prev_index >= 0 %}
        {% assign prev_post = ordered_posts[prev_index] %}
      {% endif %}
      {% if next_index < ordered_posts.size %}
        {% assign next_post = ordered_posts[next_index] %}
      {% endif %}
    {% endif %}
  {% endfor %}

  <nav class="post-navigation" role="navigation" aria-label="Post navigation">
    {% if prev_post %}
      <a class="post-nav-link post-nav-prev" href="{{ prev_post.url | relative_url }}" title="{{ prev_post.title }}">
        &larr; Previous
        <span class="post-nav-title">{{ prev_post.title }}</span>
      </a>
    {% endif %}
    {% if next_post %}
      <a class="post-nav-link post-nav-next" href="{{ next_post.url | relative_url }}" title="{{ next_post.title }}">
        <span class="post-nav-title">{{ next_post.title }}</span>
        Next &rarr;
      </a>
    {% endif %}
  </nav>
</div>